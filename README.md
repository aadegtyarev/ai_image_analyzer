# ai_image_analyzer

Python-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å –ø–æ–º–æ—â—å—é OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö vision-–º–æ–¥–µ–ª–µ–π.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –æ–¥–Ω—É –∫–∞—Ä—Ç–∏–Ω–∫—É ‚Üí –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º
- –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω–æ–∫ (–¥–æ 10) ‚Üí —Ä–µ—Å–∞–π–∑ ‚Üí –∫–æ–ª–ª–∞–∂ ‚Üí –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- —Ä–µ–∂–∏–º `--per-image` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- —Ç–µ–∫—Å—Ç–æ–≤—É—é –Ω–∞–¥—Å—Ç—Ä–æ–π–∫—É –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç–∏–Ω–∫–∏ (`-t`)
- —á–∏—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ `.env` —Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ CLI
- —Ä–∞–±–æ—Ç—É –∫–∞–∫ CLI-—É—Ç–∏–ª–∏—Ç–∞ –∏ –∫–∞–∫ –º–æ–¥—É–ª—å —Å JSON-API (–¥–ª—è Telegram-–±–æ—Ç–∞ –∏ –¥—Ä.)

---

## ‚öô –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–¢—Ä–µ–±—É–µ—Ç—Å—è **Python 3.9+**.

```bash
git clone <–≤–∞—à_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd <–ø–∞–ø–∫–∞_–ø—Ä–æ–µ–∫—Ç–∞>
````

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `requirements.txt`:

```text
openai>=1.54.0
Pillow>=11.0.0
python-dotenv>=1.0.1
```

---

## üß© –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ä—è–¥–æ–º —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º:

```bash
cp .env.example .env
```

–ü—Ä–∏–º–µ—Ä:

```env
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini
OPENAI_CONTEXT_SIZE=2048
OPENAI_TIMEOUT=60
OPENAI_MAX_TOKENS=1024
OPENAI_X_TITLE=ai_image_analyzer

IMAGE_MAX_SIZE=1024
IMAGE_QUALITY=85

COLLAGE_MAX_SIZE=2048
COLLAGE_QUALITY=85

PROMPT_FILE=prompts/art_analysis.txt
```

* `OPENAI_BASE_URL` ‚Äî –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏/—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã.
* –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `.env` –º–æ–∂–Ω–æ **–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–∑ CLI** –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏:

  * `--OPENAI_MODEL`, `--OPENAI_TIMEOUT`, `--IMAGE_MAX_SIZE` –∏ —Ç.–¥.

* `OPENAI_MAX_TOKENS` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Ç–æ–∫–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å (–ø–∞—Ä–∞–º–µ—Ç—Ä `max_tokens`).
* `OPENAI_CONTEXT_SIZE` –∑–∞–¥–∞—ë—Ç –æ–∫–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ (–≤ —Ç–æ–∫–µ–Ω–∞—Ö). –ï—Å–ª–∏ `OPENAI_MAX_TOKENS` –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —á–µ–º `OPENAI_CONTEXT_SIZE`, —Å–∫—Ä–∏–ø—Ç **–æ–≥—Ä–∞–Ω–∏—á–∏—Ç** `OPENAI_MAX_TOKENS` –¥–æ `OPENAI_CONTEXT_SIZE - 1` –∏ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ stderr. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `OPENAI_CONTEXT_SIZE=2048`.
* `OPENAI_X_TITLE` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Title`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫ –∑–∞–ø—Ä–æ—Å–∞–º –∫ API (–µ—Å–ª–∏ SDK –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É headers). –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä `OPENAI_X_TITLE=ai_image_analyzer`.
* `OPENAI_BALANCE_THRESHOLD` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–∏—Å–ª–æ–≤–æ–π –ø–æ—Ä–æ–≥ –±–∞–ª–∞–Ω—Å–∞ (–≤ –≤–∞–ª—é—Ç–µ —Å–µ—Ä–≤–∏—Å–∞). –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ (`--check-balance` –∏–ª–∏ JSON `check_balance: true`) –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –±–∞–ª–∞–Ω—Å –º–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–∞, —Å–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω—ë—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–∏—Ç –æ—à–∏–±–∫—É `Low balance` –≤ –ø–æ–ª–µ `errors` JSON-–æ—Ç–≤–µ—Ç–∞.
* `--include-billing` / JSON `include_billing: true` ‚Äî –ø—Ä–æ—Å–∏—Ç –≤–∫–ª—é—á–∞—Ç—å –ø–æ–ª—è `usage` (prompt_tokens/completion_tokens/total_tokens) –∏ `total_cost` –≤ –æ—Ç–≤–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –±–æ—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π; —É—á—Ç–∏—Ç–µ, —á—Ç–æ —Ç–æ—á–Ω–æ—Å—Ç—å `total_cost` –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –±–∏–ª–ª–∏–Ω–≥–æ–º –≤ –º–µ–ª–∫–∏—Ö –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞–∫–∞—Ö.

---

## üñº CLI-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–û–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç:

```bash
python ai_image_analyzer.py [OPTIONS] [images...]
```

–ì–¥–µ `images` ‚Äî –ø—É—Ç–∏ –∏–ª–∏ –º–∞—Å–∫–∏ (`"images/*.jpg"`).

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ü–∏–∏

* `-p, --PROMPT_FILE` ‚Äî –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –ø—Ä–æ–º—Ç–∞ (`PROMPT_FILE` –∏–∑ `.env`).
* `-t, --text` ‚Äî —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∫ `user` (PROMPT_FILE –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, —Ñ–∞–π–ª –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è).
* `--per-image` ‚Äî –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º (–±–µ–∑ –∫–æ–ª–ª–∞–∂–∞, –±–µ–∑ group-—Ñ–∞–π–ª–∞).
* `-q, --quiet` ‚Äî —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º (–º–∏–Ω–∏–º—É–º –ª–æ–≥–æ–≤).

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ CLI:

```text
--OPENAI_API_KEY, -k
--OPENAI_BASE_URL, -u
--OPENAI_MODEL, -m
--OPENAI_TIMEOUT, -T
--OPENAI_MAX_TOKENS, -M
--OPENAI_CONTEXT_SIZE, -C
--OPENAI_X_TITLE, -X
--IMAGE_MAX_SIZE, -s
--IMAGE_QUALITY, -Q
--COLLAGE_MAX_SIZE, -S
--COLLAGE_QUALITY, -G
--PROMPT_FILE, -p
```

### 1Ô∏è‚É£ –û–¥–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞

–°–æ–∑–¥–∞—ë—Ç `photo_analyse.md` —Ä—è–¥–æ–º —Å —Ñ–∞–π–ª–æ–º:

```bash
python ai_image_analyzer.py images/photo.jpg
```

### 2Ô∏è‚É£ –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω–æ–∫ (–¥–æ 10, –∫–æ–ª–ª–∞–∂)

–°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–ª–ª–∞–∂ –∏ –æ–¥–∏–Ω –æ–±—â–∏–π —Ñ–∞–π–ª `group_YYYYMMDD_HHMMSS_analyse.txt`:

```bash
python ai_image_analyzer.py "images/*.jpg"
```

### 3Ô∏è‚É£ –†–µ–∂–∏–º `--per-image` (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –∫–∞–∂–¥—É—é)

–ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí `*_analyse.md`:

```bash
python ai_image_analyzer.py --per-image "images/*.jpg"
```

### 4Ô∏è‚É£ –ö–∞—Ä—Ç–∏–Ω–∫–∞ + —Ç–µ–∫—Å—Ç (PROMPT_FILE –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)

–û—Ç–≤–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, —Ñ–∞–π–ª—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è:

```bash
python ai_image_analyzer.py images/photo.jpg -t "–†–∞–∑–±–µ—Ä–∏ –∫–∞–¥—Ä –∫–∞–∫ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫"
```

### 5Ô∏è‚É£ –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç

–ë–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:

```bash
python ai_image_analyzer.py -t "–ü—Ä–µ–¥–ª–æ–∂–∏ –∏–¥–µ—é —Ñ–æ—Ç–æ—Å–µ—Ä–∏–∏ –æ –∑–∏–º–Ω–µ–π –º–µ–ª–∞–Ω—Ö–æ–ª–∏–∏"
```

---

## üìÇ –ü—Ä–æ–º–ø—Ç—ã

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–º–ø—Ç—ã –ª–µ–∂–∞—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `prompts/`:

* `PROMPT_FILE` —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º—Ç–æ–º.
* –í –º–æ–¥—É–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –µ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ `list_prompts`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤.

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```text
prompts/
  art_analysis.txt
  series_idea.txt
  mentor_simple.txt
```

---

## üß† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –º–æ–¥—É–ª—è (JSON-API)

–°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–¥–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ JSON-—Å–æ–æ–±—â–µ–Ω–∏—è.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
from ai_image_analyzer import handle_json_request, handle_json_request_str
```

### –î–µ–π—Å—Ç–≤–∏–µ `list_prompts`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:

```python
from ai_image_analyzer import handle_json_request

resp = handle_json_request({
    "action": "list_prompts",
    "prompts_dir": "prompts",
})

if resp["ok"]:
    for item in resp["prompts"]:
        print(item["name"], "=>", item["path"])
```

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:

```json
{
  "ok": true,
  "prompts_dir": "prompts",
  "prompts": [
    {"name": "art_analysis.txt", "path": "prompts/art_analysis.txt"},
    ...
  ]
}
```

### –î–µ–π—Å—Ç–≤–∏–µ `analyze`

–û–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:

```jsonc
{
  "action": "analyze",
  "prompt_file": "prompts/art_analysis.txt", // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∏–Ω–∞—á–µ –±–µ—Ä—ë—Ç—Å—è –∏–∑ env
  "override_text": null,                     // —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º—Ç–∞ (user text)
  "per_image": false,                        // true ‚Äî —Ä–µ–∂–∏–º per-image
  "quiet": true,                             // –ø–æ–¥–∞–≤–ª—è—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
  "images": [
    { "path": "images/DSC04264.jpg" },
    { "name": "inline1.jpg", "data_b64": "..." }
  ],
  "overrides": {                             // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ override –¥–ª—è env
    "OPENAI_MODEL": "vis-google/gemma-3-27b-it",
    "IMAGE_MAX_SIZE": 1024
  }
}
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ –≤–∏–¥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

* `{ "path": "images/file.jpg" }` ‚Äî —á—Ç–µ–Ω–∏–µ —Å –¥–∏—Å–∫–∞
* `{ "name": "file.jpg", "data_b64": "<base64>" }` ‚Äî –±–∞–π—Ç—ã –≤ –ø–∞–º—è—Ç–∏ (—É–¥–æ–±–Ω–æ –¥–ª—è Telegram-–±–æ—Ç–∞)

#### –ü—Ä–∏–º–µ—Ä: –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –±–∞–π—Ç–æ–≤ (Telegram)

```python
import base64
from ai_image_analyzer import handle_json_request

photo_bytes: bytes = ...  # bytes –∏–∑ Telegram

req = {
    "action": "analyze",
    "prompt_file": "prompts/art_analysis.txt",
    "per_image": True,
    "quiet": True,
    "images": [
        {
            "name": "telegram_photo.jpg",
            "data_b64": base64.b64encode(photo_bytes).decode("ascii"),
        }
    ],
    "overrides": {
        # –ø—Ä–∏–º–µ—Ä: –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –±–æ—Ç–∞
        # "OPENAI_MODEL": "vis-google/gemma-3-27b-it"
    },
}

resp = handle_json_request(req)

if resp["ok"] and resp["results"]:
    text = resp["results"][0]["text"]
    # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º text –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## üì§ –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ JSON-API

–û—Ç–≤–µ—Ç `analyze`:

```jsonc
{
  "ok": true,
  "mode": "single" | "collage" | "per_image" | "image_with_text" | "text_only",
  "results": [
    {
      "index": 0,
      "image_name": "DSC04264.jpg", // –∏–ª–∏ "collage"
      "text": "–∞–Ω–∞–ª–∏–∑...",
      "filenames": ["DSC04264.jpg", "DSC04265.jpg"] // —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–ª–ª–∞–∂–∞
    }
  ],
  "text_only": null,  // –¥–ª—è text_only —Ä–µ–∂–∏–º–∞ ‚Äî –∑–¥–µ—Å—å —Ç–µ–∫—Å—Ç
  "errors": []        // —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫/–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
}
```

–†–µ–∂–∏–º—ã:

* `single` ‚Äî –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –æ–¥–∏–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
* `collage` ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –≤ –∫–æ–ª–ª–∞–∂.
* `per_image` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
* `image_with_text` ‚Äî –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω `override_text` –≤–º–µ—Å—Ç–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º(—è–º–∏).
* `text_only` ‚Äî –∑–∞–ø—Ä–æ—Å –±–µ–∑ –∫–∞—Ä—Ç–∏–Ω–æ–∫, —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç.

---

## üìù –ó–∞–º–µ—á–∞–Ω–∏—è

* –ú–∞–∫—Å–∏–º—É–º **10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ (CLI –∏ JSON).
* –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ—Å–∞–π–∑—è—Ç—Å—è –¥–æ `IMAGE_MAX_SIZE` –ø–æ –¥–ª–∏–Ω–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ.
* –ö–æ–ª–ª–∞–∂ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Å–µ—Ç–∫—É (N√óN, N√óM).
* –í CLI –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–≤–æ—è OpenAI-—Å–µ—Å—Å–∏—è.
* JSON-API **–Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—à–µ—Ç –Ω–∞ –¥–∏—Å–∫** ‚Äî —Ç–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤ –æ—Ç–≤–µ—Ç–µ.

–¢–∞–∫–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–¥–æ–±–Ω–æ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ Telegram-–±–æ—Ç–∞: –±–æ—Ç —à–ª—ë—Ç JSON ‚Äî –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç —Ä–∞–∑–±–æ—Ä–∞/–∏–¥–µ–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

```
::contentReference[oaicite:1]{index=1}
```
